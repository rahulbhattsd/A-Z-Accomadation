<body>
  <div class="row mt-3">
    <div class="col-8 offset-2">
      <h3 class="text-center"><%= listing.title %></h3>
    </div>
    <div class="listing-card col-6 offset-3">
      <img src="<%= listing.image.url %>" class="card-img-top show-img" alt="listing-image" />
      <div class="card-body">
        <p class="card-text">
          <strong>Owner:</strong> <%= listing.owner.username %><br />
          <%= listing.description %><br />
          <strong>Price:</strong> â‚¹<%= listing.price.toLocaleString("en-IN") %><br />
          <%= listing.location %><br />
          <%= listing.country %><br />

          <% if (listing.isBooked) { %>
            <span class="badge bg-danger">ðŸ”’ Booked by <%= listing.bookedBy?.username || "someone" %></span>
          <% } %>
        </p>

        <% if (currentUser && currentUser._id.toString() === listing.owner._id.toString()) { %>
          <div class="btn-group d-flex justify-content-center">
            <a href="/listings/<%= listing._id %>/edit" class="btn edit-btn btn-sm custom-edit-btn">Edit</a>
            <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE">
              <button class="btn delete-btn btn-sm">Delete</button>
            </form>
          </div>
        <% } else if (!listing.isBooked) { %>
          <form method="GET" action="/listings/<%= listing._id %>/book">
            <button class="btn btn-success w-100 mt-2">Book Now</button>
          </form>
        <% } else { %>
          <p class="text-center text-danger">This listing has already been booked.</p>
        <% } %>
      </div>
    </div>
  </div>
</body>




























